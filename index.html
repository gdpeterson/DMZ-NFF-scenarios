<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DMZ Futures Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --ink:#0f172a; --muted:#64748b; --card:#f8fafc; --stroke:#cbd5e1; --axis:#475569;
      --chip-bg:#ffffff; --chip-stroke:#e2e8f0; --shadow:0 10px 25px rgba(15,23,42,.08);
    }
    body{
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Apple SD Gothic Neo,Malgun Gothic,sans-serif;
      max-width:1060px; margin:2rem auto; padding:0 1rem; color:var(--ink);
      background: radial-gradient(1200px 600px at 30% -10%, #eef2ff 0%, #ffffff 55%);
    }
    header{ display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap; }
    nav a{ color:var(--muted); text-decoration:none; margin-right:1rem; }
    #plot{ margin-top:1rem; border:1px solid var(--stroke); border-radius:14px; padding:16px; background:#fff; box-shadow:var(--shadow); }
    .card{ margin-top:1rem; padding:1rem; border:1px solid var(--stroke); border-radius:14px; background:var(--card); }
    .muted{ color:var(--muted); font-size:.92rem; }
    .chips{ display:flex; flex-wrap:wrap; gap:.5rem; margin:.25rem 0 0; }
    .chip{ display:inline-flex; align-items:center; gap:.4ch; border:1px solid var(--chip-stroke);
           padding:.25rem .55rem; border-radius:999px; background:var(--chip-bg); font-size:.85rem; }
    .group{ margin-top:.85rem; }
    button.toggle{ padding:.35rem .7rem; border-radius:8px; border:1px solid var(--stroke); background:#fff; cursor:pointer; }
    button.toggle.active{ background:#0f172a; color:#fff; border-color:#0f172a; }
    .scenario-tag{ font-weight:600; font-size:.95rem; paint-order:stroke; stroke:#fff; stroke-width:8px; }
    .axis{ fill:var(--axis); font-size:.9rem; letter-spacing:.02em; font-variant:all-small-caps; }
    .legend{ font-size:.9rem; }
    .provenance{ margin-top:1rem; font-size:.9rem; color:var(--muted); }
  </style>

  <!-- Load D3 first -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- Load your app (bump ?v= when you update explore.js to bust cache) -->
  <script src="explore.js?v=11" defer></script>

  <!-- Static-site i18n for all non-triangle text -->
  <script>
    // Bilingual strings for static text on this page (axes stay English via explore.js)
    const STATIC_I18N = {
      en: {
        title: "DMZ Futures Explorer",
        nav_explore: "Explore",
        nav_about: "About",
        nav_library: "Library",
        tagline: "Explore DMZ futures via the Nature Futures Framework. Click in the triangle to snap to a scenario; use EN/KR to switch language.",
        provenance: "Provenance: EcoPeace Forum 2023–2024 — scenarios & seeds curated from the DMZ preprint (Kim et al. 2024) and Peterson’s storybook.",
        about_h2: "About",
        about_p: "This prototype makes the Nature Futures Framework explorable for the Korean DMZ context: Nature for Nature, Nature for Society, Nature as Culture, and a Balanced synthesis, plus a hybrid corridor concept. All content is grounded in two source documents from the EcoPeace Forum process.",
        library_h2: "Library",
        lib_kim: "Kim et al. 2024 — DMZ Visions Preprint (EcoPeace Forum)",
        lib_peterson: "Peterson 2024 — DMZ Storybook (Narratives & Vignettes)"
      },
      kr: {
        title: "DMZ 미래 탐색기",
        nav_explore: "탐색",
        nav_about: "소개",
        nav_library: "자료실",
        tagline: "자연 미래 프레임워크로 DMZ의 가능한 미래를 탐색하세요. 삼각형을 클릭하면 가장 가까운 시나리오로 이동합니다. EN/KR 버튼으로 언어를 전환하세요.",
        provenance: "출처: 에코피스 포럼 2023–2024 — 시나리오와 시드는 DMZ 예비논문(Kim et al. 2024)과 Peterson의 이야기집에서 인용·정리했습니다.",
        about_h2: "소개",
        about_p: "이 프로토타입은 DMZ 맥락에서 자연 미래 프레임워크를 탐색할 수 있도록 합니다: 자연을 위한 자연, 사회를 위한 자연, 문화로서의 자연, 균형적 종합과 하이브리드 회랑 구상. 모든 내용은 에코피스 포럼 출처 문서에 근거합니다.",
        library_h2: "자료실",
        lib_kim: "Kim 외 2024 — DMZ 비전 예비논문 (에코피스 포럼)",
        lib_peterson: "Peterson 2024 — DMZ 이야기집 (서사·비네트)"
      }
    };

    function updateStaticText(lang){
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.dataset.i18n;
        if (STATIC_I18N[lang] && STATIC_I18N[lang][key]) {
          el.textContent = STATIC_I18N[lang][key];
        }
      });
    }

    // Initialize static text to saved language BEFORE explore.js renders
    document.addEventListener("DOMContentLoaded", () => {
      const initLang = localStorage.getItem("dmz-lang") || "en";
      updateStaticText(initLang);
    });

    // Listen for language changes from explore.js (see note below)
    document.addEventListener("dmz-lang-change", (e) => {
      updateStaticText(e.detail.lang);
    });
  </script>
</head>
<body>
  <header>
    <h1 data-i18n="title">DMZ Futures Explorer</h1>
    <div>
      <button id="btn-en" class="toggle">EN</button>
      <button id="btn-kr" class="toggle">KR</button>
    </div>
  </header>

  <nav>
    <a href="#explore" data-i18n="nav_explore">Explore</a>
    <a href="#about" data-i18n="nav_about">About</a>
    <a href="#library" data-i18n="nav_library">Library</a>
  </nav>

  <p class="muted" data-i18n="tagline">
    Explore DMZ futures via the Nature Futures Framework. Click in the triangle to snap to a scenario; use EN/KR to switch language.
  </p>

  <!-- Explore section -->
  <section id="explore"></section>
  <div id="plot"></div>
  <div id="scenario-card" class="card"></div>

  <!-- Provenance ribbon -->
  <p class="provenance" data-i18n="provenance">
    Provenance: EcoPeace Forum 2023–2024 — scenarios & seeds curated from the DMZ preprint (Kim et al. 2024) and Peterson’s storybook.
  </p>

  <!-- About -->
  <section id="about" class="card">
    <h2 data-i18n="about_h2">About</h2>
    <p data-i18n="about_p">
      This prototype makes the Nature Futures Framework explorable for the Korean DMZ context...
    </p>
  </section>

  <!-- Library -->
  <section id="library" class="card">
    <h2 data-i18n="library_h2">Library</h2>
    <ul>
      <li>
        <a href="https://osf.io/g3zb4_v1" target="_blank" rel="noopener noreferrer" data-i18n="lib_kim">
          Kim et al. 2024 — DMZ Visions Preprint (EcoPeace Forum)
        </a>
      </li>
      <li>
        <a href="https://osf.io/g3zb4_v1" target="_blank" rel="noopener noreferrer" data-i18n="lib_peterson">
          Peterson 2024 — DMZ Storybook (Narratives &amp; Vignettes)
        </a>
      </li>
    </ul>
  </section>
</body>
</html>
